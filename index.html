<!DOCTYPE html>
<html>
  <head>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <link rel="stylesheet" href="./style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      type="text/javascript"
      language="javascript"
      src="cro_regv3.json"
    ></script>
    <title>Projektni zadatak</title>
  </head>
  <body>
    <div class="header">
      <h1>Projektni zadatak</h1>
    </div>
    <div class="row">
      <div class="left">
        <h2 class="karta">Karta Hrvatske</h2>
        <div id="map"></div>
      </div>
      <div class="right">
        <div class="zupanijaPodaci">
          <p>Zupanija: Brodsko-Posavska</p>
          <p>Broj stanovnika: 100k</p>
        </div>
        <div id="dropdown">
          <select id="options" name="options">
            <option value="brojStanovnika">Broj stanovnika po zupaniji</option>
            <option value="zivorodeni">Broj zivorodenih po zupaniji</option>
            <option value="umrli">Broj umrlih po zupaniji</option>
            <option value="sklopljeniBrakovi">
              Broj sklopljenih brakova po zupaniji
            </option>
            <option value="razvedeniBrakovi">
              Broj razvedenih brakova po zupaniji
            </option>
          </select>
        </div>
        <div id="barchart">Tu ce biti barchart</div>
      </div>
    </div>
    <div class="footer">
      <h2>Footer</h2>
    </div>
    <script>
      var populationData = [
        { county: "Grad Zagreb", population: 802762 },
        { county: "Splitsko-Dalmatinska Zupanija", population: 449610 },
        { county: "Zagrebacka Zupanija", population: 311416 },
        { county: "Primorsko-Goranska Zupanija", population: 286677 },
        { county: "Osjecko-Baranjska Zupanija", population: 283035 },
        { county: "Istarska Zupanija", population: 208229 },
        { county: "Zadarska Zupanija", population: 168672 },
        { county: "Varazdinska Zupanija", population: 168560 },

        { county: "Vukovarsko-Srijemska Zupanija", population: 159213 },
        { county: "Sisacko-Moslavacka Zupanija", population: 152546 },
        { county: "Brodsko-Posavska Zupanija", population: 143827 },
        { county: "Krapinsko-Zagorska Zupanija", population: 126334 },
        { county: "Dubrovacko-Neretvanska Zupanija", population: 121381 },
        { county: "Karlovacka Zupanija", population: 118263 },
        { county: "Medimurska Zupanija", population: 110999 },
        { county: "Bjelovarsko-Bilogorska Zupanija", population: 109822 },
        { county: "Koprivnicko-Krizevacka Zupanija", population: 109137 },
        { county: "Sibensko-Kninska Zupanija", population: 101436 },
        { county: "Viroviticko-Podravska Zupanija", population: 77086 },
        { county: "Pozesko-Slavonska Zupanija", population: 69583 },
        { county: "Licko-Senjska Zupanija", population: 45943 },
      ];
      var width = 800;
      var height = 800;
      var projection = d3.geo
        .mercator()
        .center([1, 10])
        .scale(6000)
        .translate([17600, 4500])
        .rotate([-180, 0]);
      var path = d3.geo.path().projection(projection);
      var svg = d3
        .select("#map")
        .append("svg")
        .attr("width", width)
        .attr("height", height)
        .style("background", "white")
        .call(d3.behavior.zoom().scaleExtent([0.3, 5]).on("zoom", onZoom))
        .append("g");
      d3.select("body").append("div").attr("id", "name");

      d3.select("body").append("div").attr("id", "population");

      d3.json("cro_regv3.json", function (error, cro) {
        var data = topojson.feature(cro, cro.objects.layer1);
        console.log("data", data);
        var states = svg
          .selectAll("path.county")
          .data(data.features)
          .enter()
          .append("path")
          .attr("class", "county")
          .attr("id", function (d) {
            return d.id;
          })
          .attr("d", path)

          .style("fill", "blue")
          .style("fill-opacity", function (d) {
            return d.properties.population / 1100000;
          })
          .style("stroke", "gray")
          .style("stroke-width", 1)
          .style("stroke-opacity", 1)
          .on("mouseover", function (d) {
            d3.select("#name").text(d.properties.name);
            d3.select("#population").text(
              "Population: " + d.properties.population + " "
            );
          })
          .on("click", function (d) {
            console.log(
              "Promijeniti background color diva da bude razlicit od hovera"
            );
            d3.select("#name").text(d.properties.name);
            d3.select("#population").text(
              "Population: " + d.properties.population + " "
            );
          });
      });
      function onZoom() {
        svg.attr(
          "transform",
          "translate (" +
            d3.event.translate +
            ") scale (" +
            d3.event.scale +
            ")"
        );
      }
    </script>
  </body>
</html>
